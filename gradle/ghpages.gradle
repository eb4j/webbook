githubPages {
    repoUri = 'https://github.com/eb4j/webbook.git'
    credentials {
        username = project.githubToken
        password = ''
    }
    targetBranch = 'gh-pages'
    pages {
        from 'build/asciidoc/html5'
    }
}

asciidoctorj {
    version = '1.5.4'
}

asciidoctor {
    backends = ['html5','pdf']
    requires = ['asciidoctor-diagram']
    attributes 'build-gradle': file('build.gradle'),
            'endpoint-url': 'http://eb4j.github.io/webbook/',
            'source-highlighter': 'coderay',
            'imagesdir': 'images',
            'toc': 'left',
            'icons': 'font',
            'setanchors': 'true',
            'idprefix': '',
            'idseparator': '-',
            'docinfo1': 'true'
}

publishGhPages.dependsOn asciidoctor

